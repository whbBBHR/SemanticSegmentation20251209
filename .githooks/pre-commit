#!/bin/bash
# Pre-commit hook to prevent committing sensitive files

# Colors for output
RED='\033[0;31m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# Patterns to check for sensitive data
SENSITIVE_PATTERNS=(
    "credentials.json"
    "token.json"
    "*.key"
    "*.pem"
    ".env"
    "config.ini"
    "secrets.json"
)

echo "ğŸ” Checking for sensitive files..."

# Check for sensitive file patterns in staged files
for pattern in "${SENSITIVE_PATTERNS[@]}"; do
    if git diff --cached --name-only | grep -i "$pattern" > /dev/null; then
        echo -e "${RED}âŒ ERROR: Attempting to commit sensitive file matching: $pattern${NC}"
        echo -e "${YELLOW}ğŸ’¡ Add this pattern to .gitignore and unstage the file${NC}"
        exit 1
    fi
done

echo "âœ… Pre-commit checks passed"
exit 0
